<!-- ... existing head ... -->
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <custom-navbar></custom-navbar>

    <!-- Hero Section -->
    <section id="hero" class="relative min-h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 z-0" id="vanta-bg"></div>
        <div class="relative z-10 text-center px-4 max-w-4xl mx-auto pt-8 pb-8">
            <!-- ... existing h1, p ... -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
                <!-- Buttons remain the same, logic moved to script.js -->
                <button id="connectWalletBtnIndex" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg">
                    <i data-feather="shield" class="inline w-5 h-5 mr-2"></i>
                    Connect Wallet & Start Earning
                </button>
                <button id="anonymousModeBtnIndex" class="border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white px-8 py-4 rounded-2xl font-semibold text-lg transition-all duration-300">
                    <i data-feather="user-x" class="inline w-5 h-5 mr-2"></i>
                    Enter Anonymously
                </button>
            </div>
            <!-- ... existing stats ... -->
        </div>
    </section>

    <!-- ... existing features and CTA sections ... -->

    <custom-footer></custom-footer>

    <script src="./navbar.js"></script>
    <script src="./footer.js"></script>
    <!-- Script.js loads AFTER buttons exist, but its execution might be deferred -->
    <script src="./script.js"></script>
    <script>
        // --- REMOVED BUTTON LOGIC FROM HERE ---
        // Moved into script.js DOMContentLoaded

        // --- VANTA and COUNTERS remain ---
        document.addEventListener('DOMContentLoaded', () => {
             // Re-run feather initially and after potential dynamic loads
             feather.replace();
            setTimeout(() => feather.replace(), 100);

            // Initialize Vanta.js background
             if (typeof VANTA !== 'undefined' && typeof VANTA.GLOBE === 'function') {
                VANTA.GLOBE({
                    el: "#vanta-bg",
                    mouseControls: true,
                    touchControls: true,
                    gyroControls: false,
                    minHeight: 200.00,
                    minWidth: 200.00,
                    scale: 1.00,
                    scaleMobile: 1.00,
                    color: 0x3b82f6,
                    backgroundColor: 0xf8fafc, // Match body background
                    size: 1.00
                });
            } else {
                console.error("Vanta.js or VANTA.GLOBE not loaded");
            }


            // Animated counters
            function animateCounter(element, target, duration = 2000) {
                // ... (counter animation logic remains the same) ...
                if (!element) return;
                let start = 0;
                const endTarget = typeof target === 'number' ? target : 0;
                const increment = endTarget / (duration / 16);
                const timer = setInterval(() => {
                    start += increment;
                    if (start >= endTarget) {
                        element.textContent = endTarget.toLocaleString();
                        clearInterval(timer);
                    } else {
                        element.textContent = Math.floor(start).toLocaleString();
                    }
                }, 16);
            }

            // Simulate loading stats (can run immediately, doesn't depend on SafeVoiceApp)
            const totalPostsEl = document.getElementById('totalPosts');
            const totalTokensEl = document.getElementById('totalTokens');
            const activeUsersEl = document.getElementById('activeUsers');

            animateCounter(totalPostsEl, 15247);
            // Initial token display will be updated by event listener later
            animateCounter(totalTokensEl, 0);
            animateCounter(activeUsersEl, 3421);


            // Listen for token updates from script.js to keep counter synced
             window.addEventListener('safeVoiceTokenUpdate', (e) => {
                 const currentTokensEl = document.getElementById('totalTokens'); // Use different var name
                 if(currentTokensEl) {
                     // Animate from current value shown to new value
                     const startValue = parseInt(currentTokensEl.textContent.replace(/,/g, ''), 10) || 0;
                     // Simple update for now, can add animation from startValue if desired
                     currentTokensEl.textContent = (e.detail.newBalance || 0).toLocaleString();
                 }
            });
             window.addEventListener('safeVoiceUserUpdate', (e) => {
                 const currentTokensEl = document.getElementById('totalTokens');
                 if(currentTokensEl && e.detail.currentUser) {
                      currentTokensEl.textContent = (e.detail.currentUser.tokenBalance || 0).toLocaleString();
                 } else if (currentTokensEl) {
                      currentTokensEl.textContent = '0';
                 }
            });

             // Initial token update based on loaded state (if script.js ran fast enough)
             if (window.safeVoiceApp && totalTokensEl) {
                 totalTokensEl.textContent = (window.safeVoiceApp.tokenBalance || 0).toLocaleString();
             }

        }); // End DOMContentLoaded for index.html inline script
    </script>
</body>
</html>

